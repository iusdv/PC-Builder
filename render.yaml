services:
  - type: web
    name: pcpartpicker-api
    runtime: docker
    rootDir: backend
    dockerfilePath: ./Dockerfile
    autoDeploy: true
    healthCheckPath: /health
    envVars:
      - key: ASPNETCORE_ENVIRONMENT
        value: Production
      - key: APPLY_DB_MIGRATIONS_ON_STARTUP
        value: "true"
      - key: DATABASE_HOST
        sync: false
      - key: DATABASE_PORT
        value: "3306"
      - key: DATABASE_NAME
        sync: false
      - key: DATABASE_USER
        sync: false
      - key: DATABASE_PASSWORD
        sync: false
      - key: DATABASE_SSL_MODE
        value: Required
      - key: CORS_ALLOWED_ORIGINS
        sync: false
      - key: JWT_KEY
        sync: false
      - key: JWT_ISSUER
        value: PCPartPickerAPI
      - key: JWT_AUDIENCE
        value: PCPartPickerClient
      - key: FEATURE_BUILD_OWNERSHIP
        value: "true"
